---
title: "cURL Examples"
description: "Complete cURL examples for working with the ZipKit API"
---

## Overview

These examples show how to use ZipKit with cURL, the command-line tool for making HTTP requests. cURL is great for testing, debugging, and quick scripts.

## Prerequisites

- A ZipKit account
- An access token (see [Authentication](/api-reference/authentication))
- A configured bucket (see [Buckets](/api-reference/buckets))

## Basic Example: Create a ZIP

Create a ZIP archive from remote files:

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": [
      "https://my-bucket.s3.amazonaws.com/report.pdf",
      "https://my-bucket.s3.amazonaws.com/data.csv"
    ],
    "bucket_name": "my-destination-bucket",
    "key": "archives/quarterly-report.zip"
  }'
```

**Response:**

```json
{
  "data": {
    "id": "clx7g2m4p0000xyz123abc",
    "status": "none"
  }
}
```

## Check ZIP Status

Poll for the ZIP's completion status:

```bash
curl -X GET https://zipkit.io/api/v1/zips/clx7g2m4p0000xyz123abc \
  -H "Authorization: Bearer your-access-token"
```

**Response when processing:**

```json
{
  "data": {
    "id": "clx7g2m4p0000xyz123abc",
    "status": "processing"
  }
}
```

**Response when complete:**

```json
{
  "data": {
    "id": "clx7g2m4p0000xyz123abc",
    "status": "succeeded"
  }
}
```

## Complete Workflow with Polling

Here's a complete bash script that creates a ZIP and polls until it completes:

```bash
#!/bin/bash

ACCESS_TOKEN="your-access-token"
API_URL="https://zipkit.io/api/v1"

# Create the ZIP
echo "Creating ZIP..."
RESPONSE=$(curl -s -X POST ${API_URL}/zips \
  -H "Authorization: Bearer ${ACCESS_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": [
      "https://my-bucket.s3.amazonaws.com/file1.pdf",
      "https://my-bucket.s3.amazonaws.com/file2.jpg"
    ],
    "bucket_name": "my-destination-bucket",
    "key": "my-archive.zip"
  }')

# Extract ZIP ID using jq (or use grep/sed if jq not available)
ZIP_ID=$(echo $RESPONSE | jq -r '.data.id')
echo "ZIP ID: $ZIP_ID"

# Poll for completion
MAX_ATTEMPTS=30
DELAY=2

for i in $(seq 1 $MAX_ATTEMPTS); do
  echo "Checking status (attempt $i/$MAX_ATTEMPTS)..."

  STATUS_RESPONSE=$(curl -s -X GET ${API_URL}/zips/${ZIP_ID} \
    -H "Authorization: Bearer ${ACCESS_TOKEN}")

  STATUS=$(echo $STATUS_RESPONSE | jq -r '.data.status')
  echo "Status: $STATUS"

  if [ "$STATUS" = "succeeded" ]; then
    echo "✓ ZIP created successfully!"
    echo "Location: my-destination-bucket/my-archive.zip"
    exit 0
  elif [ "$STATUS" = "failed" ]; then
    echo "✗ ZIP creation failed"
    exit 1
  fi

  sleep $DELAY
done

echo "⚠ Timeout: ZIP did not complete within expected time"
exit 1
```

## Using Cloudflare R2

To use Cloudflare R2 instead of S3, specify `"service": "r2"`:

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": [
      "https://my-source.com/file1.pdf",
      "https://my-source.com/file2.jpg"
    ],
    "bucket_name": "my-r2-bucket",
    "service": "r2",
    "key": "archive.zip"
  }'
```

## Custom ZIP Key (Filename)

Specify a custom key (path/filename) for your ZIP:

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": [
      "https://example.com/file1.pdf",
      "https://example.com/file2.pdf"
    ],
    "bucket_name": "my-bucket",
    "key": "reports/2025/november/monthly-report.zip"
  }'
```

The ZIP will be stored at `reports/2025/november/monthly-report.zip` in your bucket.

## Auto-Generated Key

If you don't specify a `key`, ZipKit will auto-generate one based on the ZIP's UUID:

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": [
      "https://example.com/file1.pdf",
      "https://example.com/file2.pdf"
    ],
    "bucket_name": "my-bucket"
  }'
```

The resulting ZIP will be named something like `zip_clx7g2m4p0000xyz123abc.zip`.

## Multiple Files

Create a ZIP with many files:

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": [
      "https://example.com/photo1.jpg",
      "https://example.com/photo2.jpg",
      "https://example.com/photo3.jpg",
      "https://example.com/photo4.jpg",
      "https://example.com/photo5.jpg"
    ],
    "bucket_name": "my-photos-bucket",
    "key": "collections/vacation-2025.zip"
  }'
```

## Error Handling

### Invalid Access Token

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer invalid-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": ["https://example.com/file.pdf"],
    "bucket_name": "my-bucket"
  }'
```

**Response (401):**

```json
{
  "error": "unauthorized",
  "message": "Invalid or missing access token"
}
```

### Bucket Not Found

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": ["https://example.com/file.pdf"],
    "bucket_name": "non-existent-bucket"
  }'
```

**Response (404):**

```json
{
  "error": "not_found",
  "message": "Bucket not found"
}
```

### Missing Required Fields

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "bucket_name": "my-bucket"
  }'
```

**Response (400):**

```json
{
  "error": "bad_request",
  "message": "urls is required and must be an array"
}
```

## Pretty Printing Responses

Use the `-w "\n"` flag and pipe to `jq` for formatted output:

```bash
curl -s -X GET https://zipkit.io/api/v1/zips/clx7g2m4p0000xyz123abc \
  -H "Authorization: Bearer your-access-token" \
  | jq '.'
```

**Output:**

```json
{
  "data": {
    "id": "clx7g2m4p0000xyz123abc",
    "status": "succeeded"
  }
}
```

## Debugging with Verbose Output

Use `-v` flag to see request/response headers and debug connection issues:

```bash
curl -v -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": ["https://example.com/file.pdf"],
    "bucket_name": "my-bucket"
  }'
```

## Saving Response to File

Save the response to a file for later processing:

```bash
curl -X POST https://zipkit.io/api/v1/zips \
  -H "Authorization: Bearer your-access-token" \
  -H "Content-Type: application/json" \
  -d '{
    "urls": ["https://example.com/file.pdf"],
    "bucket_name": "my-bucket"
  }' \
  -o response.json

# View the response
cat response.json
```

## Tips and Best Practices

<AccordionGroup>
  <Accordion title="Store token in environment variable" icon="key">
    Don't hardcode your access token in scripts. Use environment variables:

    ```bash
    export ZIPKIT_TOKEN="your-access-token"

    curl -X POST https://zipkit.io/api/v1/zips \
      -H "Authorization: Bearer ${ZIPKIT_TOKEN}" \
      -H "Content-Type: application/json" \
      -d '{"urls": ["..."], "bucket_name": "..."}'
    ```
  </Accordion>

  <Accordion title="Use -s for silent mode in scripts" icon="volume-mute">
    The `-s` flag suppresses progress output, useful for scripts:

    ```bash
    RESPONSE=$(curl -s -X POST ...)
    ```
  </Accordion>

  <Accordion title="Check HTTP status code" icon="check">
    Use `-w` to print the HTTP status code:

    ```bash
    HTTP_STATUS=$(curl -s -w "%{http_code}" -o response.json ...)
    if [ $HTTP_STATUS -eq 201 ]; then
      echo "Success!"
    else
      echo "Failed with status: $HTTP_STATUS"
    fi
    ```
  </Accordion>

  <Accordion title="Handle JSON with jq" icon="brackets-curly">
    Install `jq` for easier JSON parsing:

    ```bash
    # macOS
    brew install jq

    # Ubuntu/Debian
    apt-get install jq

    # Then use it
    ZIP_ID=$(curl -s ... | jq -r '.data.id')
    ```
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Python Examples" icon="python" href="/code-examples/python">
    See examples using Python's requests library
  </Card>

  <Card title="JavaScript Examples" icon="js" href="/code-examples/javascript">
    See examples using Node.js and fetch
  </Card>

  <Card title="Ruby Examples" icon="gem" href="/code-examples/ruby">
    See examples using Ruby's Net::HTTP
  </Card>

  <Card title="API Reference" icon="book" href="/api-reference/create-zip">
    View complete API documentation
  </Card>
</CardGroup>
